<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz SAEB - Desafio Educacional</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 15px;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            overflow: hidden;
            min-height: auto;
        }

        .screen {
            display: none;
            padding: 20px;
            min-height: auto;
        }

        .active {
            display: block;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        h2 {
            color: #555;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .teams-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .teams-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
        }

        .team-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .team-card:hover {
            transform: translateY(-3px);
            border-color: #667eea;
        }

        .team-card.selected {
            border-color: #28a745;
            background: #d4edda;
        }

        .team-card.blue {
            border-left: 4px solid #007bff;
        }

        .team-card.pink {
            border-left: 4px solid #e83e8c;
        }

        .team-card.green {
            border-left: 4px solid #28a745;
        }

        .team-card.red {
            border-left: 4px solid #dc3545;
        }

        .team-card h3 {
            color: #333;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .team-score {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
        }

        .question-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.1em;
            margin-bottom: 15px;
            color: #333;
            line-height: 1.4;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .option {
            padding: 12px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95em;
        }

        .option:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option.selected {
            border-color: #28a745;
            background: #d4edda;
        }

        .btn {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95em;
            transition: all 0.3s ease;
            margin: 8px 4px;
        }

        .btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #28a745;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-danger {
            background: #dc3545;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .challenge-container {
            background: #fff3cd;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #ffeaa7;
            margin-bottom: 20px;
        }

        .challenge-title {
            color: #856404;
            margin-bottom: 12px;
            font-size: 1.2em;
        }

        .challenge-description {
            color: #666;
            line-height: 1.5;
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .checkbox-group {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9em;
        }

        .ranking-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 0.9em;
        }

        .ranking-table th,
        .ranking-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .ranking-table th {
            background: #667eea;
            color: white;
        }

        .ranking-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .ranking-position {
            font-weight: bold;
            color: #667eea;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px solid #eee;
            flex-wrap: wrap;
            gap: 10px;
        }

        .challenge-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px solid #eee;
            flex-wrap: wrap;
            gap: 10px;
        }

        .current-team {
            font-size: 1.1em;
            font-weight: bold;
            color: #667eea;
        }

        .score-display {
            font-size: 1.1em;
            font-weight: bold;
            color: #28a745;
        }

        .feedback {
            padding: 12px;
            border-radius: 6px;
            margin: 12px 0;
            text-align: center;
            font-weight: bold;
            font-size: 0.95em;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .hidden {
            display: none;
        }

        .team-selection {
            background: #e9ecef;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .team-selection-title {
            text-align: center;
            margin-bottom: 12px;
            color: #495057;
            font-size: 1.1em;
        }

        .final-scores {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .final-scores h3 {
            text-align: center;
            margin-bottom: 15px;
            color: #495057;
            font-size: 1.2em;
        }

        .score-breakdown {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 12px;
        }

        @media (max-width: 768px) {
            .score-breakdown {
                grid-template-columns: 1fr;
            }
        }

        .score-item {
            background: white;
            padding: 12px;
            border-radius: 6px;
            border-left: 4px solid #667eea;
            font-size: 0.9em;
        }

        .score-label {
            font-weight: bold;
            color: #495057;
        }

        .score-value {
            font-size: 1.1em;
            color: #28a745;
            font-weight: bold;
        }

        .skip-info {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 6px;
            border-left: 4px solid #ffc107;
            margin-top: 12px;
            font-size: 0.9em;
        }

        .skip-info p {
            margin: 4px 0;
            color: #856404;
        }

        /* ESTILOS PARA A P√ÅGINA INICIAL */
        .logo-container {
            text-align: center;
            margin-bottom: 20px;
        }

        .logo-image {
            max-width: 250px;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        @media (max-width: 480px) {
            .logo-image {
                max-width: 200px;
            }
        }

        .rules-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
            max-height: 400px;
            overflow-y: auto;
        }

        .rules-title {
            color: #333;
            margin-bottom: 12px;
            text-align: center;
            font-size: 1.2em;
        }

        .rules-list {
            list-style-type: none;
            padding: 0;
        }

        .rules-list li {
            padding: 8px 0;
            border-bottom: 1px solid #dee2e6;
            color: #555;
            line-height: 1.4;
            font-size: 0.9em;
        }

        .rules-list li:last-child {
            border-bottom: none;
        }

        .rules-list li strong {
            color: #667eea;
        }

        .start-buttons {
            text-align: center;
            margin-top: 20px;
        }

        /* Ajustes para telas muito pequenas */
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .screen {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.5em;
                margin-bottom: 15px;
            }
            
            .btn {
                padding: 8px 16px;
                font-size: 0.9em;
                margin: 5px 3px;
            }
            
            .controls, .challenge-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .controls > * {
                margin: 5px 0;
            }
        }

        /* Ajustes para evitar rolagem vertical */
        @media (max-height: 700px) {
            .rules-container {
                max-height: 300px;
            }
            
            .screen {
                padding: 15px;
            }
            
            .question-container,
            .challenge-container,
            .team-selection {
                padding: 15px;
            }
        }

        @media (max-height: 600px) {
            .rules-container {
                max-height: 250px;
            }
            
            h1 {
                font-size: 1.5em;
                margin-bottom: 15px;
            }
            
            .logo-image {
                max-width: 180px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Tela Inicial MODIFICADA -->
        <div id="start-screen" class="screen active">
            <h1>üéØ CORACROSS - Desafio Educacional</h1>
            
            <!-- Container para a logo -->
            <div class="logo-container">
                <img src="logo.jpeg" alt="Logo do Jogo" class="logo-image" id="game-logo">
            </div>

            <!-- Container das regras do jogo -->
            <div class="rules-container">
                <h2 class="rules-title">üìã Regras do Jogo</h2>
                <ul class="rules-list">
                    <li><strong>4 Equipes:</strong> Azul, Rosa, Verde e Vermelho</li>
                    <li><strong>Rodadas Alternadas:</strong> A cada pergunta, escolha qual equipe vai responder</li>
                    <li><strong>Quest√µes SAEB:</strong> Perguntas de Portugu√™s e Matem√°tica do 9¬∫ ano</li>
                    <li><strong>+5 Pontos:</strong> Cada resposta correta vale 5 pontos</li>
                    <li><strong>Desafios de Educa√ß√£o F√≠sica:</strong> Acertou a quest√£o? Libera um desafio pr√°tico!</li>
                    <li><strong>+5 Pontos Extras:</strong> Cada desafio conclu√≠do vale mais 5 pontos</li>
                    <li><strong>Pular Desafio:</strong> Se a equipe n√£o conseguir, pode pular sem pontos extras</li>
                    <li><strong>Ranking Final:</strong> Vit√≥ria para a equipe com maior pontua√ß√£o total</li>
                    <li><strong>Professor:</strong> Controla as sele√ß√µes e valida os desafios realizados</li>
                </ul>
            </div>

            <!-- Bot√µes de a√ß√£o -->
            <div class="start-buttons">
                <button class="btn" onclick="startGame()">üéÆ Iniciar Jogo</button>
                <button class="btn btn-danger" onclick="resetGame()">üîÑ Reiniciar Jogo</button>
            </div>
        </div>

        <!-- Tela do Quiz -->
        <div id="quiz-screen" class="screen">
            <h1>üìù Quest√£o SAEB</h1>
            
            <div class="team-selection">
                <h3 class="team-selection-title">Selecione a equipe que vai responder:</h3>
                <div class="teams-grid">
                    <div class="team-card blue" onclick="selectCurrentTeam(1)">
                        <h3>üîµ Equipe Azul</h3>
                        <div class="team-score" id="quiz-team1-score">0 pontos</div>
                    </div>
                    <div class="team-card pink" onclick="selectCurrentTeam(2)">
                        <h3>üéÄ Equipe Rosa</h3>
                        <div class="team-score" id="quiz-team2-score">0 pontos</div>
                    </div>
                    <div class="team-card green" onclick="selectCurrentTeam(3)">
                        <h3>üåø Equipe Verde</h3>
                        <div class="team-score" id="quiz-team3-score">0 pontos</div>
                    </div>
                    <div class="team-card red" onclick="selectCurrentTeam(4)">
                        <h3>üî¥ Equipe Vermelha</h3>
                        <div class="team-score" id="quiz-team4-score">0 pontos</div>
                    </div>
                </div>
                <div class="current-team" id="current-team-display">Nenhuma equipe selecionada</div>
            </div>
            
            <div class="question-container">
                <div class="question-text" id="question-text">Carregando pergunta...</div>
                <div class="options-grid" id="options-container">
                    <!-- Op√ß√µes ser√£o inseridas aqui via JavaScript -->
                </div>
            </div>

            <div id="feedback" class="feedback hidden"></div>

            <div class="controls">
                <button class="btn btn-danger" onclick="backToStart()">Voltar ao In√≠cio</button>
                <button class="btn" onclick="submitAnswer()" id="submit-btn" disabled>Responder</button>
                <button class="btn btn-success" onclick="showRanking()">Finalizar Jogo</button>
            </div>
        </div>

        <!-- Tela do Desafio -->
        <div id="challenge-screen" class="screen">
            <h1>üèÉ‚Äç‚ôÇÔ∏è Desafio de Educa√ß√£o F√≠sica</h1>
            <div class="current-team" id="challenge-team-display">Equipe: </div>
            
            <div class="challenge-container">
                <h2 class="challenge-title" id="challenge-title">Desafio Carregando...</h2>
                <div class="challenge-description" id="challenge-description">
                    Descri√ß√£o do desafio...
                </div>
                
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="challenge-done">
                        <label for="challenge-done">Desafio realizado com sucesso</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="practice-done">
                        <label for="practice-done">Parte pr√°tica conclu√≠da</label>
                    </div>
                </div>

                <div class="skip-info">
                    <p><strong>‚ö†Ô∏è A equipe n√£o conseguiu realizar o desafio?</strong></p>
                    <p>Clique em "Pular Desafio" para continuar sem ganhar os pontos extras.</p>
                </div>
            </div>

            <div class="challenge-controls">
                <div>
                    <button class="btn btn-danger" onclick="backToQuiz()">Voltar ao Quiz</button>
                    <button class="btn btn-warning" onclick="skipChallenge()">Pular Desafio</button>
                </div>
                <button class="btn btn-success" onclick="completeChallenge()">Concluir Desafio</button>
            </div>
        </div>

        <!-- Tela de Ranking -->
        <div id="ranking-screen" class="screen">
            <h1>üèÜ Ranking Final</h1>
            
            <table class="ranking-table">
                <thead>
                    <tr>
                        <th>Posi√ß√£o</th>
                        <th>Equipe</th>
                        <th>Pontua√ß√£o Total</th>
                        <th>Quest√µes Acertadas</th>
                        <th>Desafios Conclu√≠dos</th>
                    </tr>
                </thead>
                <tbody id="ranking-body">
                    <!-- Ranking ser√° preenchido via JavaScript -->
                </tbody>
            </table>

            <div class="final-scores">
                <h3>üìä Pontua√ß√£o Detalhada por Equipe</h3>
                <div class="score-breakdown" id="score-breakdown">
                    <!-- Detalhamento de pontua√ß√£o ser√° preenchido via JavaScript -->
                </div>
            </div>

            <div class="controls" style="justify-content: center;">
                <button class="btn" onclick="newGame()">Novo Jogo</button>
                <button class="btn btn-danger" onclick="backToStart()">Voltar ao In√≠cio</button>
            </div>
        </div>
    </div>

    <script>
        // Banco de dados atualizado com as quest√µes fornecidas
        const database = {
            questions: [
                // PORTUGU√äS
                {
                    id: 1,
                    subject: "Portugu√™s",
                    descriptor: "D2 ‚Äì Identificar o tema de um texto",
                    text: "Texto: 'A leitura √© uma janela para o mundo. Por meio dela, conhecemos lugares, pessoas e ideias sem sair do lugar.' Qual √© o tema central do texto?",
                    options: [
                        "O ato de viajar para conhecer o mundo.",
                        "A import√¢ncia da leitura como forma de conhecer o mundo.",
                        "A dificuldade de ler livros longos.",
                        "A necessidade de sair de casa para aprender."
                    ],
                    correct: 1
                },
                {
                    id: 2,
                    subject: "Portugu√™s",
                    descriptor: "D7 ‚Äì Inferir o sentido de uma palavra ou express√£o",
                    text: "Texto: 'O aluno chegou atrasado, mas conseguiu se sair bem na prova.' A express√£o 'se sair bem' significa:",
                    options: [
                        "Chegar antes do hor√°rio.",
                        "Ter bom desempenho.",
                        "Ficar nervoso.",
                        "Desistir da prova."
                    ],
                    correct: 1
                },
                {
                    id: 3,
                    subject: "Portugu√™s",
                    descriptor: "D8 ‚Äì Identificar a finalidade de textos de diferentes g√™neros",
                    text: "O principal objetivo de uma receita culin√°ria √©:",
                    options: [
                        "Contar uma hist√≥ria sobre comida.",
                        "Ensinar como preparar um prato.",
                        "Opinar sobre sabores diferentes.",
                        "Convencer o leitor a comer saud√°vel."
                    ],
                    correct: 1
                },
                {
                    id: 4,
                    subject: "Portugu√™s",
                    descriptor: "D12 ‚Äì Estabelecer rela√ß√µes entre partes de um texto",
                    text: "Texto: 'Estava chovendo, por isso n√£o fomos ao parque.' A express√£o 'por isso' indica:",
                    options: [
                        "Causa.",
                        "Consequ√™ncia.",
                        "Contraste.",
                        "Tempo."
                    ],
                    correct: 1
                },
                {
                    id: 5,
                    subject: "Portugu√™s",
                    descriptor: "D13 ‚Äì Reconhecer efeitos de sentido decorrentes do uso da pontua√ß√£o",
                    text: "Texto: 'Vamos comer, crian√ßas!' O uso da v√≠rgula altera o sentido da frase porque:",
                    options: [
                        "Indica uma pausa sem import√¢ncia.",
                        "Separa o vocativo, evitando ambiguidade.",
                        "Indica que as crian√ßas devem ser comidas.",
                        "Mostra que a frase √© uma pergunta."
                    ],
                    correct: 1
                },
                {
                    id: 6,
                    subject: "Portugu√™s",
                    descriptor: "D5 ‚Äì Identificar o conflito gerador do enredo",
                    text: "Texto: 'Maria queria ir ao baile, mas n√£o tinha o vestido adequado.' Qual √© o conflito da personagem?",
                    options: [
                        "Ter um vestido novo.",
                        "N√£o poder ir ao baile por falta de roupa adequada.",
                        "Gostar de festas.",
                        "Chegar cedo ao baile."
                    ],
                    correct: 1
                },
                {
                    id: 7,
                    subject: "Portugu√™s",
                    descriptor: "D9 ‚Äì Reconhecer o efeito de sentido do uso de tempos verbais",
                    text: "Na frase 'Se eu estudasse mais, tiraria notas melhores', o verbo est√° no tempo:",
                    options: [
                        "Presente do indicativo.",
                        "Futuro do pret√©rito.",
                        "Pret√©rito imperfeito do subjuntivo.",
                        "Pret√©rito perfeito do indicativo."
                    ],
                    correct: 2
                },
                {
                    id: 8,
                    subject: "Portugu√™s",
                    descriptor: "D10 ‚Äì Identificar recursos de persuas√£o em textos argumentativos",
                    text: "Texto: 'Coma frutas todos os dias! Sua sa√∫de agradece.' Que tipo de recurso √© usado no texto?",
                    options: [
                        "Um argumento de autoridade.",
                        "Um apelo emocional.",
                        "Um dado cient√≠fico.",
                        "Uma cita√ß√£o liter√°ria."
                    ],
                    correct: 1
                },
                {
                    id: 9,
                    subject: "Portugu√™s",
                    descriptor: "D14 ‚Äì Identificar a rela√ß√£o entre o t√≠tulo e o texto",
                    text: "T√≠tulo: 'Chuva de Surpresas' Trecho: 'Era anivers√°rio de Ana e, de repente, come√ßou a chover confete colorido no p√°tio.' O t√≠tulo se relaciona ao texto porque:",
                    options: [
                        "Fala de uma tempestade real.",
                        "Representa o clima da festa.",
                        "Faz refer√™ncia a algo inesperado e alegre.",
                        "Indica tristeza."
                    ],
                    correct: 2
                },
                // MATEM√ÅTICA
                {
                    id: 10,
                    subject: "Matem√°tica",
                    descriptor: "D6 ‚Äì Resolver problemas que envolvem equa√ß√µes do 1¬∫ grau",
                    text: "Resolva: 3x - 5 = 10. O valor de x √©:",
                    options: ["3", "4", "5", "6"],
                    correct: 3
                },
                {
                    id: 11,
                    subject: "Matem√°tica",
                    descriptor: "D10 ‚Äì Resolver problemas que envolvem o Teorema de Pit√°goras",
                    text: "Um tri√¢ngulo ret√¢ngulo tem catetos de 6 cm e 8 cm. Qual √© o comprimento da hipotenusa?",
                    options: ["10 cm", "12 cm", "14 cm", "8 cm"],
                    correct: 0
                },
                {
                    id: 12,
                    subject: "Matem√°tica",
                    descriptor: "D13 ‚Äì Identificar propriedades de figuras planas",
                    text: "Um quadrado e um ret√¢ngulo t√™m o mesmo per√≠metro. O que podemos afirmar?",
                    options: [
                        "O quadrado tem sempre √°rea maior.",
                        "O ret√¢ngulo tem sempre √°rea maior.",
                        "Depende das medidas dos lados.",
                        "Ambost√™m √°reas iguais."
                    ],
                    correct: 2
                },
                {
                    id: 13,
                    subject: "Matem√°tica",
                    descriptor: "D17 ‚Äì Resolver problemas que envolvem proporcionalidade",
                    text: "Se 5 cadernos custam R$ 40, quanto custar√£o 8 cadernos?",
                    options: ["R$ 48", "R$ 56", "R$ 64", "R$ 72"],
                    correct: 2
                },
                {
                    id: 14,
                    subject: "Matem√°tica",
                    descriptor: "D19 ‚Äì Resolver problemas que envolvem o Sistema de Equa√ß√µes",
                    text: "Sistema: {x + y = 10; x - y = 2}. O valor de x √©:",
                    options: ["4", "5", "6", "7"],
                    correct: 2
                },
                {
                    id: 15,
                    subject: "Matem√°tica",
                    descriptor: "D5 ‚Äì Resolver problemas que envolvem o c√°lculo do valor num√©rico de express√µes alg√©bricas",
                    text: "Se x = 3 e y = 2, ent√£o o valor de 2x + 3y √©:",
                    options: ["10", "11", "12", "13"],
                    correct: 2
                },
                {
                    id: 16,
                    subject: "Matem√°tica",
                    descriptor: "D8 ‚Äì Resolver problemas que envolvem porcentagem",
                    text: "Uma blusa custa R$ 80,00 e est√° com 25% de desconto. Qual √© o novo pre√ßo?",
                    options: ["R$ 55,00", "R$ 60,00", "R$ 65,00", "R$ 70,00"],
                    correct: 1
                },
                {
                    id: 17,
                    subject: "Matem√°tica",
                    descriptor: "D12 ‚Äì Resolver problemas que envolvem √°rea de figuras planas",
                    text: "A base de um tri√¢ngulo mede 10 cm e sua altura 6 cm. Qual √© sua √°rea?",
                    options: ["30 cm¬≤", "40 cm¬≤", "50 cm¬≤", "60 cm¬≤"],
                    correct: 0
                },
                {
                    id: 18,
                    subject: "Matem√°tica",
                    descriptor: "D15 ‚Äì Resolver problemas que envolvem o c√°lculo de m√©dias aritm√©ticas",
                    text: "As notas de um aluno foram 6, 8 e 10. Qual √© a m√©dia aritm√©tica?",
                    options: ["7", "8", "9", "10"],
                    correct: 1
                },
                {
                    id: 19,
                    subject: "Matem√°tica",
                    descriptor: "D18 ‚Äì Resolver problemas que envolvem rela√ß√µes entre grandezas",
                    text: "Um carro percorre 240 km em 3 horas. Qual √© sua velocidade m√©dia?",
                    options: ["60 km/h", "70 km/h", "80 km/h", "90 km/h"],
                    correct: 2
                }
            ],
            challenges: [
                {
                    id: 1,
                    title: "Agachamentos com peso corporal",
                    description: "Realize 20 agachamentos (Air Squats) com t√©cnica adequada."
                },
                {
                    id: 2,
                    title: "Flex√µes de bra√ßo",
                    description: "Execute 15 flex√µes de bra√ßo no colchonete (pode adaptar com joelhos apoiados)."
                },
                {
                    id: 3,
                    title: "Abdominais estilo CrossFit",
                    description: "Realize 20 abdominais: deite, encoste as m√£os atr√°s da cabe√ßa e toque os p√©s."
                },
                {
                    id: 4,
                    title: "Prancha est√°tica",
                    description: "Mantenha a posi√ß√£o de prancha por 60 segundos."
                },
                {
                    id: 5,
                    title: "Afundos alternados",
                    description: "Execute 10 afundos (Lunges) por perna, dando passos para frente e flexionando os joelhos."
                },
                {
                    id: 6,
                    title: "Superman no colchonete",
                    description: "Deitado de bru√ßos, levante bra√ßos e pernas juntos por 20 repeti√ß√µes."
                },
                {
                    id: 7,
                    title: "Abdominal 'canivete'",
                    description: "Execute 15 repeti√ß√µes unindo m√£os e p√©s no ar."
                },
                {
                    id: 8,
                    title: "Escalador (Mountain climbers)",
                    description: "Na posi√ß√£o de prancha, alterne joelhos no peito por 30 segundos."
                }
            ]
        };

        // Estado do jogo
        let gameState = {
            currentTeam: null,
            currentQuestion: null,
            currentChallenge: null,
            selectedOption: null,
            teams: [
                { id: 1, name: "üîµ Equipe Azul", score: 0, correctAnswers: 0, challengesCompleted: 0, challengesSkipped: 0 },
                { id: 2, name: "üéÄ Equipe Rosa", score: 0, correctAnswers: 0, challengesCompleted: 0, challengesSkipped: 0 },
                { id: 3, name: "üåø Equipe Verde", score: 0, correctAnswers: 0, challengesCompleted: 0, challengesSkipped: 0 },
                { id: 4, name: "üî¥ Equipe Vermelha", score: 0, correctAnswers: 0, challengesCompleted: 0, challengesSkipped: 0 }
            ],
            usedQuestions: [],
            usedChallenges: [],
            gameStarted: false
        };

        // Carregar estado salvo
        function loadGameState() {
            const saved = localStorage.getItem('quizGameState');
            if (saved) {
                const savedState = JSON.parse(saved);
                savedState.currentTeam = null;
                savedState.selectedOption = null;
                gameState = savedState;
                updateAllScores();
            }
        }

        // Salvar estado do jogo
        function saveGameState() {
            localStorage.setItem('quizGameState', JSON.stringify(gameState));
        }

        // Atualizar todos os placares
        function updateAllScores() {
            gameState.teams.forEach(team => {
                const quizScoreElement = document.getElementById(`quiz-team${team.id}-score`);
                if (quizScoreElement) {
                    quizScoreElement.textContent = `${team.score} pontos`;
                }
            });
        }

        // Selecionar equipe para responder na tela do quiz
        function selectCurrentTeam(teamId) {
            document.querySelectorAll('#quiz-screen .team-card').forEach(card => {
                card.classList.remove('selected');
            });

            const selectedCard = document.querySelector(`#quiz-screen .team-card:nth-child(${teamId})`);
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }

            gameState.currentTeam = teamId;
            document.getElementById('current-team-display').textContent = 
                `Equipe selecionada: ${gameState.teams[teamId-1].name}`;
            
            document.getElementById('submit-btn').disabled = false;
        }

        // Iniciar jogo
        function startGame() {
            gameState.gameStarted = true;
            loadRandomQuestion();
            showScreen('quiz-screen');
        }

        // Carregar pergunta aleat√≥ria
        function loadRandomQuestion() {
            const availableQuestions = database.questions.filter(q => 
                !gameState.usedQuestions.includes(q.id)
            );

            if (availableQuestions.length === 0) {
                gameState.usedQuestions = [];
                showRanking();
                return;
            }

            const randomIndex = Math.floor(Math.random() * availableQuestions.length);
            gameState.currentQuestion = availableQuestions[randomIndex];
            gameState.usedQuestions.push(gameState.currentQuestion.id);

            displayQuestion();
        }

        // Exibir pergunta na tela
        function displayQuestion() {
            const question = gameState.currentQuestion;
            document.getElementById('question-text').textContent = 
                `[${question.subject}] ${question.descriptor}\n\n${question.text}`;

            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';

            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option;
                optionElement.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionElement);
            });

            gameState.selectedOption = null;
            document.getElementById('feedback').classList.add('hidden');
            
            gameState.currentTeam = null;
            document.querySelectorAll('#quiz-screen .team-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.getElementById('current-team-display').textContent = 'Nenhuma equipe selecionada';
            document.getElementById('submit-btn').disabled = true;
        }

        // Selecionar op√ß√£o
        function selectOption(optionIndex) {
            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected');
            });

            document.querySelectorAll('.option')[optionIndex].classList.add('selected');
            gameState.selectedOption = optionIndex;
        }

        // Submeter resposta
        function submitAnswer() {
            if (gameState.selectedOption === null) {
                alert('Selecione uma op√ß√£o antes de responder!');
                return;
            }

            if (gameState.currentTeam === null) {
                alert('Selecione uma equipe antes de responder!');
                return;
            }

            const question = gameState.currentQuestion;
            const isCorrect = gameState.selectedOption === question.correct;
            const feedback = document.getElementById('feedback');
            const team = gameState.teams[gameState.currentTeam - 1];

            if (isCorrect) {
                feedback.textContent = '‚úÖ Resposta Correta! +5 pontos';
                feedback.className = 'feedback correct';
                
                team.score += 5;
                team.correctAnswers += 1;
                
                updateAllScores();
                saveGameState();

                document.getElementById('submit-btn').disabled = true;
                setTimeout(() => {
                    loadRandomChallenge();
                    showScreen('challenge-screen');
                }, 2000);
            } else {
                feedback.textContent = '‚ùå Resposta Incorreta';
                feedback.className = 'feedback incorrect';
                document.getElementById('submit-btn').disabled = true;
                
                setTimeout(() => {
                    loadRandomQuestion();
                }, 2000);
            }

            feedback.classList.remove('hidden');
        }

        // Carregar desafio aleat√≥rio
        function loadRandomChallenge() {
            const availableChallenges = database.challenges.filter(c => 
                !gameState.usedChallenges.includes(c.id)
            );

            if (availableChallenges.length === 0) {
                gameState.usedChallenges = [];
            }

            const randomIndex = Math.floor(Math.random() * database.challenges.length);
            gameState.currentChallenge = database.challenges[randomIndex];
            gameState.usedChallenges.push(gameState.currentChallenge.id);

            displayChallenge();
        }

        // Exibir desafio
        function displayChallenge() {
            const challenge = gameState.currentChallenge;
            document.getElementById('challenge-title').textContent = challenge.title;
            document.getElementById('challenge-description').textContent = challenge.description;
            document.getElementById('challenge-team-display').textContent = 
                `Equipe: ${gameState.teams[gameState.currentTeam - 1].name}`;
            
            document.getElementById('challenge-done').checked = false;
            document.getElementById('practice-done').checked = false;
        }

        // Concluir desafio
        function completeChallenge() {
            const challengeDone = document.getElementById('challenge-done').checked;
            const practiceDone = document.getElementById('practice-done').checked;

            if (!challengeDone || !practiceDone) {
                alert('Ambas as partes do desafio devem ser conclu√≠das para receber os pontos!');
                return;
            }

            const team = gameState.teams[gameState.currentTeam - 1];
            team.score += 5;
            team.challengesCompleted += 1;
            
            updateAllScores();
            saveGameState();

            alert('Desafio conclu√≠do com sucesso! +5 pontos');
            loadRandomQuestion();
            showScreen('quiz-screen');
        }

        // Pular desafio
        function skipChallenge() {
            if (confirm('Tem certeza que deseja pular este desafio?\n\nA equipe n√£o receber√° os pontos extras, mas poder√° continuar para a pr√≥xima pergunta.')) {
                const team = gameState.teams[gameState.currentTeam - 1];
                team.challengesSkipped += 1;
                
                updateAllScores();
                saveGameState();

                alert('Desafio pulado. A equipe n√£o recebeu pontos extras.');
                loadRandomQuestion();
                showScreen('quiz-screen');
            }
        }

        // Mostrar ranking
        function showRanking() {
            const sortedTeams = [...gameState.teams].sort((a, b) => b.score - a.score);
            
            const rankingBody = document.getElementById('ranking-body');
            rankingBody.innerHTML = '';

            sortedTeams.forEach((team, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="ranking-position">${index + 1}¬∫</td>
                    <td><strong>${team.name}</strong></td>
                    <td><strong>${team.score} pontos</strong></td>
                    <td>${team.correctAnswers}</td>
                    <td>${team.challengesCompleted}</td>
                `;
                rankingBody.appendChild(row);
            });

            showScoreBreakdown();
            showScreen('ranking-screen');
        }

        // Mostrar detalhamento de pontua√ß√£o
        function showScoreBreakdown() {
            const breakdownContainer = document.getElementById('score-breakdown');
            breakdownContainer.innerHTML = '';

            gameState.teams.forEach(team => {
                const scoreItem = document.createElement('div');
                scoreItem.className = 'score-item';
                scoreItem.innerHTML = `
                    <div class="score-label">${team.name}</div>
                    <div class="score-value">${team.score} pontos totais</div>
                    <div>‚úÖ ${team.correctAnswers} quest√µes corretas (${team.correctAnswers * 5} pontos)</div>
                    <div>üèÉ ${team.challengesCompleted} desafios conclu√≠dos (${team.challengesCompleted * 5} pontos)</div>
                    <div>‚è≠Ô∏è ${team.challengesSkipped} desafios pulados</div>
                `;
                breakdownContainer.appendChild(scoreItem);
            });
        }

        // Trocar telas
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        // Navega√ß√£o
        function backToStart() {
            showScreen('start-screen');
        }

        function backToQuiz() {
            showScreen('quiz-screen');
        }

        function newGame() {
            if (confirm('Iniciar um novo jogo? Todo o progresso atual ser√° perdido.')) {
                resetGame();
            }
        }

        function resetGame() {
            gameState = {
                currentTeam: null,
                currentQuestion: null,
                currentChallenge: null,
                selectedOption: null,
                teams: [
                    { id: 1, name: "üîµ Equipe Azul", score: 0, correctAnswers: 0, challengesCompleted: 0, challengesSkipped: 0 },
                    { id: 2, name: "üéÄ Equipe Rosa", score: 0, correctAnswers: 0, challengesCompleted: 0, challengesSkipped: 0 },
                    { id: 3, name: "üåø Equipe Verde", score: 0, correctAnswers: 0, challengesCompleted: 0, challengesSkipped: 0 },
                    { id: 4, name: "üî¥ Equipe Vermelha", score: 0, correctAnswers: 0, challengesCompleted: 0, challengesSkipped: 0 }
                ],
                usedQuestions: [],
                usedChallenges: [],
                gameStarted: false
            };
            localStorage.removeItem('quizGameState');
            updateAllScores();
            showScreen('start-screen');
        }

        // Inicializar jogo
        document.addEventListener('DOMContentLoaded', function() {
            loadGameState();
            updateAllScores();
        });
    </script>
</body>
</html>